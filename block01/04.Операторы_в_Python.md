## Операторы в языке Python

Язык Python поддерживает разные операторы. В таблице ниже они отсортированы по приоритету (от самого высокого к низкому). С помощью переменных и операторов мы можем составлять выражения для решения задач. В информатике **выражением называют синтаксическую конструкцию, составленную из констант, переменных, функций и операторов; язык может вычислить выражение и получить новое значение**. Даже если эта фраза не совсем понятна — просто знай: на любом языке выражения нужны всегда!

| Оператор | Описание |
| --- | --- |
| `[]`, `[:]` | Индексация, срез |
| `**` | Возведение в степень |
| `~`, `+`, `-` | Побитовое НЕ, плюс, минус |
| `*`, `/`, `%`, `//` | Умножение, деление, остаток, целое деление |
| `+`, `-` | Сложение, вычитание |
| `>>`, `<<` | Сдвиг вправо, влево |
| `&` | Побитовое И |
| `^`, `\|` | Побитовое исключающее ИЛИ, Побитовое ИЛИ |
| `<=`, `<`, `>`, `>=` | Меньше/равно, меньше, больше, больше/равно |
| `==`, `!=` | Равно, не равно |
| `is`, `is not` | Проверка идентичности |
| `in`, `not in` | Проверка членства |
| `not`, `or`, `and` | Логические операторы |
| `=`, `+=`, `-=`, `*=`, `/=`, `%=`, `//=`, `**=`, `&=`, `\|=`, `^=`, `>>=`, `<<=` | Операторы присваивания |

>**Примечание**: Приоритет — что за чем вычисляется в выражении. Если не уверен — используй скобки для нужного порядка.

### Арифметические операторы

Python богат на арифметические операторы: сложение, вычитание, умножение, деление, целое деление, остаток, степень. Примеры:

```python
"""
Арифметические операторы

Version: 1.0
Author: Ло Хао
"""
print(321 + 12)     # Сложение, результат 333
print(321 - 12)     # Вычитание, результат 309
print(321 * 12)     # Умножение, результат 3852
print(321 / 12)     # Деление, результат 26.75
print(321 // 12)    # Целое деление, результат 26
print(321 % 12)     # Остаток, результат 9
print(321 ** 12)    # Возведение в степень, результат 1196906950228928915420617322241

```
Арифметика: приоритет операций — сначала умножение/деление, потом сложение/вычитание. Степени считаются первыми. Скобки меняют порядок:

```python
"""
Приоритет операций

Version: 1.0
Author: Ло Хао
"""
print(2 + 3 * 5)           # 17
print((2 + 3) * 5)         # 25
print((2 + 3) * 5 ** 2)    # 125
print(((2 + 3) * 5) ** 2)  # 625

```
Операторы присваивания
Самые часто используемые — слева переменной присваивается правая часть. Можно комбинировать с арифметикой: a += b — так же, как a = a + b; a *= a + 2 — это a = a * (a + 2). Пример:

```python
"""
Операторы присваивания

Version: 1.0
Author: Ло Хао
"""
a = 10
b = 3
a += b        # равно a = a + b
a *= a + 2    # равно a = a * (a + 2)
print(a)      # результат — ?
```

Присваивание НЕ возвращает значение! То есть нельзя просто: print(a = 10) — это ошибка. С Python 3.8 появился оператор ":=" ("морж"), он и присваивает, и возвращает. Пример:

```python
"""
Морж-оператор (:=)

Version: 1.0
Author: Ло Хао
"""
# SyntaxError: invalid syntax
# print((a = 10))
# Морж-оператор
print((a := 10))  # 10
print(a)          # 10
```

>**Совет**: если раскомментировать 8 строку — будет SyntaxError. Если print(a = 10) — будет TypeError.

Операторы сравнения и логики
Отношения: ==, !=, <, >, <=, >=. == сравнвает, а = всегда присваивание!
В Python 2 было <> для "не равно", в 3 версии — только != (или будет ошибка).

Операторы выдают True или False.
Логические: and — "и", or — "или", not — "не".
and — обе стороны True — результат True, если хотя бы одна False — результат False.
or — любая True — результат True.
not — переворачивает логическое значение.

```python
"""
Сравнения и логика

Version: 1.0
Author: Ло Хао
"""
flag0 = 1 == 1
flag1 = 3 > 2
flag2 = 2 < 1
flag3 = flag1 and flag2
flag4 = flag1 or flag2
flag5 = not flag0
print('flag0 =', flag0)     # True
print('flag1 =', flag1)     # True
print('flag2 =', flag2)     # False
print('flag3 =', flag3)     # False
print('flag4 =', flag4)     # True
print('flag5 =', flag5)     # False
print(flag1 and not flag2)  # True
print(1 > 2 or 2 == 3)      # False
```

>**Пояснение**: сначала считается сравнение 1 == 1, потом результат присваивается. В print() можно выводить много значений, между ними будет пробел.

Использование операторов и выражений
Пример 1: Фаренгейт в Цельсий
Задание: Ввести температуру в °F и перевести в °C. Формула: 
C
=
(
F
−
32
)
/
1.8
C=(F−32)/1.8.

```python
"""
Фаренгейт в Цельсий

Version: 1.0
Author: Ло Хао
"""
f = float(input('Введите °F: '))
c = (f - 32) / 1.8
print('%.1f°F = %.1f°C' % (f, c))
```

>**Примечание**: input возвращает строку, нужна конвертация в float.

В строке print два %.1f — они подставляют значения. Если был %d — int, %s — строка.
Есть и другой способ форматирования — через f-строку:

```python
"""
Фаренгейт в Цельсий

Version: 1.1
Author: Ло Хао
"""
f = float(input('Введите °F: '))
c = (f - 32) / 1.8
print(f'{f:.1f}°F = {c:.1f}°C')
```

#### Пример 2: Вычисление длины окружности и площади круга

> **Требования**: Введите радиус круга ($\small{r}$) и вычислите его длину окружности ($\small{2 \pi r}$) и площадь ($\small{\pi r^{2}}$).

```python
"""
Периметр и площадь

Version: 1.0
Author: Ло Хао
"""
radius = float(input('Радиус: '))
perimeter = 2 * 3.1416 * radius
area = 3.1416 * radius * radius
print('Периметр: %.2f' % perimeter)
print('Площадь: %.2f' % area)
```

Если импортировать модуль math, pi получится math.pi:

```python
"""
Периметр и площадь (math.pi)

Version: 1.1
Author: Ло Хао
"""
import math

radius = float(input('Радиус: '))
perimeter = 2 * math.pi * radius
area = math.pi * radius ** 2
print(f'Периметр: {perimeter:.2f}')
print(f'Площадь: {area:.2f}')
```

>**Пояснение**: строка import math нужна, чтобы воспользоваться math.pi.

В Python 3.8 можно выводить имя и значение переменной одной строкой:

```python
"""
Периметр и площадь (новый способ вывода)

Version: 1.2
Author: Ло Хао
"""
import math

radius = float(input('Радиус: '))  # ввод: 5.5
perimeter = 2 * math.pi * radius
area = math.pi * radius ** 2
print(f'{perimeter = :.2f}')  # результат: perimeter = 34.56
print(f'{area = :.2f}')       # результат: area = 95.03
```

> **Примечание**: если a = 9.87, f'{a = }' — 'a = 9.87', f'{a = :.1f}' — 'a = 9.9'.

Пример 3: Високосный год
Введите год (после 1582), определить — високосный ли он?

```python
"""
Високосный год

Version: 1.0
Author: Ло Хао
"""
year = int(input('Введите год: '))
is_leap = year % 4 == 0 and year % 100 != 0 or year % 400 == 0
print(f'{is_leap = }')
```

**Примечание**: Для григорианского календаря (календаря, который мы используем сегодня) правила определения високосных лет следующие: 1. Годы, не кратные 4, являются обычными годами; 2. Годы, кратные 4, но не кратные 100, являются високосными; 3. Годы, кратные 400, являются високосными. Григорианский календарь был введён папой Григорием XIII в октябре 1582 года в качестве модификации и замены юлианского календаря. Это следует учитывать при вводе лет. В приведённом выше коде используется `%` для проверки того, является ли `year` кратным `4`, `100` или `400`. Затем он использует операторы `and` и `or` для объединения этих трёх условий. Должны быть выполнены оба первых условия; третье условие в сочетании с первыми двумя достаточно, чтобы выполнялось только одно из них.

### Подводим итоги

Благодаря приведённым выше объяснениям и примерам, я полагаю, вы уже ощутили всю мощь операторов и выражений. Многие практические задачи программирования требуют построения выражений для решения, поэтому переменные, операторы и выражения являются важнейшей основой любого языка программирования. Если у вас есть вопросы по этому уроку, не спешите переходить к следующему. Если что неясно — не спеши дальше, спрашивай.
