## Структуры циклов
Мы при написании программ очень часто сталкиваемся со сценариями, где требуется многократно выполнять одну или несколько инструкций. Например, нам нужно выводить на экран строку «hello, world» каждые 1 секунду на протяжении одного часа. Следующий код выполняет такую операцию один раз; если нам нужно непрерывно выводить это в течение часа, пришлось бы написать этот фрагмент 3600 раз — готовы ли вы к этому?
```
python
import time
print('hello, world')
time.sleep(1)
```
> 
> Примечание: функция `sleep` из встроенного модуля Python `time` позволяет приостанавливать выполнение программы. Аргумент `1` задаёт количество секунд для паузы; можно использовать типы `int` или `float`, например, `0.05` означает `50` миллисекунд. Понятия о функциях и модулях мы разберём в последующих уроках.

Чтобы решить описанную проблему, в программах на Python мы используем структуры циклов. Структура цикла — это конструкция, управляющая многократным выполнением одной или нескольких инструкций. С её помощью нам не нужно писать код 3600 раз — достаточно написать его один раз и повторить в цикле 3600 итераций. В Python есть два способа построить цикл: цикл `for-in` и цикл `while`.

### Цикл for-in
Если заранее известно, сколько раз должен выполняться цикл, рекомендуется использовать цикл `for-in`. Например, для случая с 3600 повторениями можно написать код ниже. Обратите внимание: блок кода, управляемый циклом `for-in`, также формируется с помощью отступов — это полностью совпадает с тем, как мы формируем блоки кода в ветвлениях. Блок кода, управляемый циклом `for-in`, называется телом цикла; инструкции в теле обычно выполняются многократно согласно настройкам цикла.
```
python
"""
Каждую 1 секунду выводить «hello, world», в течение 1 часа
Author: 骆昊
Version: 1.0
"""
import time
for i in range(3600):
    print('hello, world')
    time.sleep(1)
```
Следует пояснить: выражение `range(3600)` формирует диапазон от `0` до `3599`. Поместив такой диапазон в цикл `for-in`, мы можем через переменную цикла `i` последовательно получать целые числа от `0` до `3599`, за счёт чего инструкции в блоке `for-in` выполнятся 3600 раз. Разумеется, `range` очень гибок; ниже приведены примеры использования функции `range`:
- `range(101)`: порождает целые числа от `0` до `100`; обратите внимание, что `101` не включается.
- `range(1, 101)`: порождает целые числа от `1` до `100`; это левая граница включительно и правая невключительно, то есть `[1, 101)`.
- `range(1, 101, 2)`: порождает нечётные числа от `1` до `100`, где `2` — это шаг (шаг приращения); `101` не включается.
- `range(100, 0, -2)`: порождает чётные числа от `100` до `1`, где `-2` — это шаг (шаг убывания); `0` не включается.

Вы могли заметить, что в коде выше операции вывода и паузы не используют переменную цикла `i`. В случаях, когда переменная цикла не нужна, по принятому в Python соглашению её обычно именуют `_`. Исправленная версия будет выглядеть так. Хотя результат не меняется, такой код выглядит профессиональнее.

```
python
"""
Каждую 1 секунду выводить «hello, world», в течение 1 часа
Author: 骆昊
Version: 1.0
"""
import time
for _ in range(3600):
    print('hello, world')
    time.sleep(1)
```

### Цикл while
Если неизвестно, сколько раз повторится цикл, можно использовать `while`. Цикл `while` — это повторение кода до тех пор, пока выполняется некоторое условие; такой цикл также называют условным циклом. Далее через два примера разберём использование `while`.

#### Пример 1: сумма чётных чисел от 1 до 100
```
python
"""
Сумма чётных чисел от 1 до 100
Version: 1.0
Author: 骆昊
"""
sum = 0
num = 2
while num <= 100:
    sum += num
    num += 2
print(sum)
```

В коде выше мы используем переменную `sum` для хранения результата вычисления. Запись `sum += num` эквивалентна `sum = sum + num` — такой стиль проще и нагляднее; старайтесь применять его в дальнейшем. В Python мы можем использовать `else` вместе с циклом `while`: блок после `else` выполняется, если цикл завершился нормально; если же был использован `break`, блок `else` выполняться не будет.

```
python
"""
Сумма чётных чисел от 1 до 100
Version: 1.0
Author: 骆昊
"""
sum = 0
num = 1
while num <= 100:
    if num % 2 == 0:
        sum += num
    num += 1
else:
    print(sum)
```

#### Пример 2: наибольший общий делитель
Наибольший общий делитель двух положительных целых чисел — это наибольшее положительное целое число, которое делит каждое из них без остатка. Ниже приведены два алгоритма.

```
python
"""
НОД — перебор (грубая сила)
Version: 1.0
Author: 骆昊
"""
x = int(input('x = '))
y = int(input('y = '))
if x > y:
    x, y = y, x
for factor in range(x, 0, -1):
    if x % factor == 0 and y % factor == 0:
        print(f'最大公约数: {factor}')
        break
```

```
python
"""
НОД — алгоритм Евклида
Version: 1.0
Author: 骆昊
"""
x = int(input('x = '))
y = int(input('y = '))
while y != 0:
    x, y = y, x % y
print(f'最大公约数: {x}')
```

> 
> Примечание: способ решения и последовательность шагов называются алгоритмом. Для одной и той же задачи можно спроектировать разные алгоритмы, и они будут отличаться по потреблению памяти и эффективности исполнения; именно эти различия и определяют качество алгоритма. Сравните два фрагмента выше и почувствуйте, почему алгоритм Евклида является лучшим выбором. В приведённом коде выражение `x, y = y % x, x` означает, что значение `y % x` присваивается `x`, а прежнее значение `x` присваивается `y`.

#### Пример 3: игра «Угадай число»
Условие: компьютер загадывает случайное число от 1 до 100; игрок вводит свой вариант; компьютер выводит подсказку «больше», «меньше» или «угадал». Если игрок угадывает число, компьютер сообщает, сколько попыток понадобилось, и игра заканчивается; иначе она продолжается.
```
python
"""
Игра «Угадай число»
Version: 1.0
Author: 骆昊
"""
import random
answer = random.randrange(1, 101)
counter = 0
while True:
    counter += 1
    num = int(input('请输入: '))
    if num < answer:
        print('大一点.')
    elif num > answer:
        print('小一点.')
    else:
        print('猜对了.')
        break
print(f'你一共猜了{counter}次.')
```

> 
> Примечание: в коде выше мы импортировали модуль стандартной библиотеки Python `random` с помощью `import random`. Функция `randrange` этого модуля генерирует случайное число в диапазоне от 1 до 100 (100 не включается). Переменная `counter` служит для подсчёта количества итераций цикла — то есть сколько попыток сделал пользователь; при каждой итерации значение `counter` увеличивается на 1.

### Итоги
Освоив в Python ветвления и циклы, мы можем решать множество практических задач. Из этого урока вы узнали, что для построения циклов используются ключевые слова `for` и `while`.
- Если заранее известно число повторений цикла, обычно применяют цикл `for`.
- Если число повторений заранее неизвестно, можно использовать цикл `while`.
Кроме того, в цикле можно использовать ключевое слово `break` для немедленного завершения цикла, а также ключевое слово `continue`, чтобы перейти непосредственно к следующей итерации.
