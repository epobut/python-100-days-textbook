## День 5 — Ветвящиеся структуры

### Приложения ветвящихся структур

#### Пример 1: Единица измерения конвертер длины.

> **Объяснение:** Конвертация между дюймами и сантиметрами.

```Python
value = float(input('Введите длину: '))
unit = input('Введите единицу измерения: ')
if unit == 'in' or unit == 'дюйм':
    print('%f дюйм = %f сантиметр' % (value, value * 2.54))
elif unit == 'cm' or unit == 'см':
    print('%f сантиметр = %f дюйм' % (value, value / 2.54))
else:
    print('Не удается распознать единицу измерения')
```

> **Пояснение:** Программное обеспечение с таким типом вложенной структуры if, как правило, должно следовать принципу **предпочтения использования плоской структуры над вложенной**. Так называемая плоская структура — это упрощение сложных вложенных структур, замена на структуры if...elif...else, чтобы уменьшить количество вложенных уровней кода и улучшить читаемость кода.

#### Пример 2: Система баллов и рейтингов.

> **Объяснение:** 90 баллов и выше — A, 80 баллов и выше — B, 70 баллов и выше — C, 60 баллов и выше — D, ниже 60 баллов — E.

```Python
score = float(input('Введите баллы: '))
if score >= 90:
    grade = 'A'
elif score >= 80:
    grade = 'B'
elif score >= 70:
    grade = 'C'
elif score >= 60:
    grade = 'D'
else:
    grade = 'E'
print('Рейтинг:', grade)
```

#### Пример 3: Расчет периметра и площади треугольника.

> **Объяснение:** Введите длины трех сторон. Если эти три стороны могут образовать треугольник, вычислите периметр и площадь треугольника.

```Python
a = float(input('a = '))
b = float(input('b = '))
c = float(input('c = '))
if a + b > c and a + c > b and b + c > a:
    perimeter = a + b + c
    print('периметр: %f' % perimeter)
    s = perimeter / 2
    area = (s * (s - a) * (s - b) * (s - c)) ** 0.5
    print('площадь: %f' % area)
else:
    print('Не может образовать треугольник')
```

> **Пояснение:** Приведенный выше код использует формулу Герона $$\sqrt{s(s-a)(s-b)(s-c)}$$ для вычисления площади треугольника. Многие люди также вычисляют периметр треугольника с помощью формулы $$\frac{1}{2}ah$$, где $$a$$ — длина основания, а $$h$$ — высота. Однако для вычисления необходимы данные о высоте. В следующем примере можно использовать тригонометрические функции для преобразования, а затем вычислить высоту с помощью стороны и угла.

#### Пример 4: Определение високосного года.

> **Объяснение:** Введите год и определите, является ли этот год високосным.

```Python
year = int(input('Введите год: '))
is_leap = year % 4 == 0 and year % 100 != 0 or year % 400 == 0
if is_leap:
    print('%d год — високосный' % year)
else:
    print('%d год — не високосный' % year)
```

> **Пояснение:** Правило високосного года: делится на 4, но не делится на 100, или делится на 400.

### Упражнения

#### Упражнение 1: Расчет индекса массы тела.

> **Объяснение:** Введите рост (в сантиметрах) и вес (в килограммах), вычислите ИМТ по формуле: $$ИМТ = \frac{вес}{рост^2}$$. Обратите внимание, что высота должна быть преобразована в метры. По критериям ВОЗ: ИМТ ниже 18,5 считается недостаточным весом, от 18,5 до 24 — нормальным, от 25 до 29 — избыточным весом, выше 30 — ожирением.

#### Упражнение 2: Налоговый калькулятор личного дохода.

> **Объяснение:** Налогооблагаемая часть дохода рассчитывается в соответствии с месячным доходом минус 5000 юаней (порог). Для 5000 юаней порога согласно системе налогообложения США следует использовать 12000 долларов в качестве стандартного вычета. Налоги рассчитываются следующим образом:

| Налогооблагаемый доход | Ставка налога | Быстрый вычет |
| ------ | ------ | -------- |
| Не превышает 3000 | 3% | 0 |
| Превышает 3000 до 12000 | 10% | 210 |
| Превышает 12000 до 25000 | 20% | 1410 |
| Превышает 25000 до 35000 | 25% | 2660 |
| Превышает 35000 до 55000 | 30% | 4410 |
| Превышает 55000 до 80000 | 35% | 7160 |
| Превышает 80000 | 45% | 15160 |

<img src="./res/formula.png" style="zoom:50%;">

> **Примечание:** Изображение формулы приведено выше. Формула: $$налог = налогооблагаемый~доход \times налоговая~ставка - быстрый~вычет$$.

```Python
income = float(input('Введите месячный доход: '))
taxable = income - 5000
if taxable <= 0:
    tax = 0
elif taxable <= 3000:
    tax = taxable * 0.03
elif taxable <= 12000:
    tax = taxable * 0.1 - 210
elif taxable <= 25000:
    tax = taxable * 0.2 - 1410
elif taxable <= 35000:
    tax = taxable * 0.25 - 2660
elif taxable <= 55000:
    tax = taxable * 0.3 - 4410
elif taxable <= 80000:
    tax = taxable * 0.35 - 7160
else:
    tax = taxable * 0.45 - 15160
print('Налог к уплате: ￥%.2f' % tax)
print('Доход после налогообложения: ￥%.2f' % (income - tax))
```

#### Упражнение 3: Простой игра в кости.

> **Объяснение:** Игрок ставит ставку. Два кубика подбрасываются один раз. Если сумма равна 7 или 11, игрок выигрывает. Если сумма равна 2, 3 или 12, игрок проигрывает (банк выигрывает). Для других результатов игра продолжается, пока сумма не станет 7 (игрок проигрывает) или равной первому результату (игрок выигрывает).

```Python
from random import randint

money = 1000
while money > 0:
    print('Ваш текущий баланс:', money)
    debt = int(input('Введите ставку: '))
    # Проверка ставки на допустимость
    if debt > 0 and debt <= money:
        # Генерация первого броска кости
        first = randint(1, 6) + randint(1, 6)
        print('Вы бросили %d очка(ов)' % first)
        if first == 7 or first == 11:
            print('Вы выиграли!!!')
            money += debt
        elif first == 2 or first == 3 or first == 12:
            print('Вы проиграли!!!')
            money -= debt
        else:
            # Продолжение игры
            go_on = True
            while go_on:
                current = randint(1, 6) + randint(1, 6)
                print('Вы бросили %d очка(ов)' % current)
                if current == 7:
                    print('Вы проиграли!!!')
                    money -= debt
                    go_on = False
                elif current == first:
                    print('Вы выиграли!!!')
                    money += debt
                    go_on = False
    else:
        print('Недопустимая ставка')
print('Вы разорены, игра окончена!')
```
